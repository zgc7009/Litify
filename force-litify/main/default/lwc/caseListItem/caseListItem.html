<template>
    <lightning-card
        title="Your Cases" 
        icon-name="standard:link" 
        key={litCase.Id}>
        <article class="slds-card">
            <span class="slds-assistive-text">Case</span>
            <div class="slds-card__body slds-card__body_inner">
                {litCase.Name}
                {litCase.Description__c}
            </div>
            <template if:true={caseEntities.data}>
                <template if:true={caseEntities.data.length}>
                    <footer if:false={expanded} class="slds-card__footer">
                        <lightning-button label="View All Involved" onclick={toggleExpansion}></lightning-button>
                        <span class="slds-assistive-text">View All Involved</span>
                    </footer>
                    <div if:true={expanded}
                        class="slds-border_top">
                        <div class="slds-m-around_medium">
                            <div class="slds-text-heading_small">
                                <header>Involved Entities</header>
                            </div>
                            <div class="slds-text-body_regular">
                                <p>The entities listed below have sharing records with the Case in context.
                                    Based on Salesforce functionality, any User higher in the role heirarrchy
                                    will also have visibility to the case record.
                                </p>
                            </div>
                        </div>
                        <template
                            for:each={caseEntities.data}
                            for:item="entity">
                            <c-case-list-entity
                                key={entity.Id}
                                entity={entity}
                                ondrop={propogateRemoveConfirmation}>
                            </c-case-list-entity>
                        </template>
                        <footer class="slds-card__footer">
                            <lightning-button label="Collapse" onclick={toggleExpansion}></lightning-button>
                            <span class="slds-assistive-text">Hide All Involved</span>
                        </footer>
                    </div>
                </template>
            </template>
        </article>
    </lightning-card>
</template>